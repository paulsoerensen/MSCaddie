@page "/ClubView"
@using MSCaddie.Client.Utils
@using MSCaddie.Shared
@using MSCaddie.Shared.Dtos
@inherits ClubViewBase

<PageTitle>Clubs</PageTitle>

<h1>Clubs</h1>
<p>@message</p>
@* @if (clubs == null)
{
    <Div Position="Position.Absolute.Top.Is50.Start.Is50.Translate.Middle"><DisplaySpinner/></Div>
}
else
{
    <div Class="control_wrapper">
        <DropdownList TItem="ClubDto" TValue="int"
                  Data="@clubs"
                  TextField="@((item)=>item.ClubName)"
                  ValueField="@((item)=>item.ClubId)"
                  SelectedValueChanged="@OnClubChange"
                  Color="Color.Default"
                  MaxMenuHeight="50px"  
                  SelectedValue="@clubId">
        </DropdownList>
        <button @onclick="() => OpenClub()">Opret ny klub</button>
    </div>

    <div class="container">
        <div class="row py-5">
            <DataGrid
                TItem="CourseDto"
                Data="courses"
                Responsive
                Sortable="false"
                Striped
                RowSelectable="(_) => false"
                RowHoverCursor="_ => Cursor.Default"
                >
                <EmptyTemplate>
                    <div class="box">
                        No courses were found!
                    </div>
                </EmptyTemplate>
                <DataGridColumns>
                    <DataGridColumn PreventRowClick Readonly Field="@nameof(CourseDto.CourseName)" Caption="Course">
                        <DisplayTemplate>
                            @{
                                var item = context as CourseDto;
                                <NavLink href="@RouteUtils.Courses(item?.ClubId ?? 0)">@item?.CourseName</NavLink>
                            }
                        </DisplayTemplate>
                    </DataGridColumn>
                    <DataGridColumn Field="@nameof(CourseDto.Par)" Caption="Par"></DataGridColumn>
                    <DataGridColumn Field="@nameof(CourseDto.Slope)" Caption="Slope"></DataGridColumn>
                    <DataGridColumn Field="@nameof(CourseDto.CourseRating)" Caption="CourseRating"></DataGridColumn>
                    <DataGridColumn Field="@nameof(CourseDto.Tee)" Caption="Tee"></DataGridColumn>

                </DataGridColumns>
            </DataGrid>
        </div>
    </div>
      
} *@

@if (ShowBackdrop)
{
    <div class="modal-backdrop fade show"></div>
}

<div class="modal @ModalClass" tabindex="-1" role="dialog" style="display:@ModalDisplay">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Opret ny klub</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>@NewClub</p>
            </div>
            <div class="modal-footer">
                <p>@ModalMessage</p>
                <button type="button" class="btn btn-primary" data-dismiss="modal" @onclick="() => SaveClub()">Opret klub</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal" @onclick="() => CancelClub()">Luk</button>
            </div>
        </div>
    </div>
</div>

